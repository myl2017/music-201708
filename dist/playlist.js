"use strict";$(function(){$.get("./playlist.json").then(function(reponse){var id=parseInt(location.search.match(/\bid=([^&]*)/)[1],10);reponse.forEach(function(i){if(i.id===id){console.log(i);console.log(i.id+"=="+id);$(".head .head-inner").append(headTemplate(i));$(".head .head-bg").css("background-image","url("+i.cover+")");var detail=detailTemplate(i);detail.length<=1?$(".intro > div:nth-child(2)").addClass("active"):$(".intro > div:nth-child(2)").removeClass("active")}else{return}})},function(error){alert(error)});$.get("./database.json").then(function(reponse){reponse.forEach(function(i){if(i.id<=30){$(".lists .list").append(playListTemplate(i));$(".lists .loading").remove()}})},function(error){alert(error)})});function headTemplate(i){return $('<div class="cover">\n                     <img src="'+i.cover+'" alt=""/>\n                     <div class="song-menu">歌单</div>\n                     <div class="listen">\n                          <svg class="icon-headset"><use xlink:href="#icon-erjiicon"></use></svg><small class="listen-num">'+i.listener+'万</small>\n                     </div>\n                </div>\n                <div class="text">\n                     <h1>'+i.title+'</h1>\n                     <a class="avatar-link" href="#">\n                           <div class="avatar">\n                             <img src="'+i.cover+'" alt=""/>\n                           </div>\n                           <span>'+i.author+"</span>\n                     </a>\n                </div>")}function playListTemplate(i){return $('<li>\n                <a href="./song.html?&id='+i.id+'">\n                     <div class="order song-hot">'+i.id+'</div>\n                            <div class="songInfo">\n                                <h3>'+i.name+'<span></span></h3>\n                                <div class="songIntroduce"><span>'+i.singer+" - "+i.description+'</span></div>\n                            </div>\n                     <div class="playButton"><span></span></div>\n                </a>\n              </li>')}function detailTemplate(i){var $intro=i.intro.split("<br/>");for(var j=0;j<$intro.length;j++){var $span=$("<span>"+$intro[j]+"<br/></span>");$(".intro > div.detail").append($span)}return $intro}$(".arrowdown").on("click",function(e){$(".arrowup").addClass("active");$(".arrowdown").addClass("active");$(".intro > div:first-child").removeClass("active")});$(".arrowup").on("click",function(e){$(".arrowup").removeClass("active");$(".arrowdown").removeClass("active");$(".intro > div:first-child").addClass("active")});
